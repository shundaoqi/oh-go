# 06. 利用記録入力機能（メイン機能）

## 概要

おごり自販機の利用記録を入力するメイン機能。制約チェック、バリデーション、リアルタイム検証を含む。

## 作業内容

### Phase 1: 制約チェック・バリデーション

- [ ] 1日1回制限チェック機能
- [ ] 週1回ペア制限チェック機能
- [ ] 日付範囲バリデーション（過去1週間、未来日禁止）
- [ ] リアルタイムバリデーション機能

### Phase 2: フォームコンポーネント

- [ ] 自販機選択カードコンポーネント
- [ ] 利用記録入力フォーム
- [ ] 相手選択ドロップダウン
- [ ] 日付選択（目立たないUI）
- [ ] エラー表示機能

### Phase 3: データ管理・API

- [ ] 利用記録作成API
- [ ] 利用記録状態管理（Jotai）
- [ ] 自販機マスタ取得
- [ ] ユーザー一覧取得

### Phase 4: メイン画面統合

- [ ] ダッシュボードページ実装
- [ ] 複数自販機フォーム表示
- [ ] 送信処理・フィードバック
- [ ] ローディング・エラーハンドリング

### Phase 5: テスト

- [ ] バリデーション機能のテスト
- [ ] フォーム送信のテスト
- [ ] 制約チェックのテスト
- [ ] 統合テスト

## 成果物

- [ ] `src/features/dashboard/` 配下の全ファイル
- [ ] メイン画面（ダッシュボード）
- [ ] 利用記録入力フォーム群
- [ ] 制約チェック機能
- [ ] API関数群
- [ ] テストファイル

## 受け入れ条件

- [ ] 全自販機のフォームが1画面に表示される
- [ ] 相手選択で制約チェックがリアルタイムで実行される
- [ ] 適切なエラーメッセージが表示される
- [ ] 日付の制限が正しく動作する
- [ ] 送信が成功し、データが保存される
- [ ] ローディング・エラー状態が適切に表示される

## 優先度

🔴 High

## 見積もり

6-8時間

## 依存関係

- 05_profile-management
- 02_database-design
